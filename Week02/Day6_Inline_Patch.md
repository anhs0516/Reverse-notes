
### ✅ 인라인 패치(Inline Patch)
#### 📌 정의
- 실행 중인 프로그램의 원래 코드 영역에 직접 수정을 가하는 방식.
- 보통 몇 바이트 단위로 기존 명령어를 다른 명령어로 바꾸거나 JMP를 삽입하여 흐름을 변경함.

#### 📌 특징
- 대상 코드의 원래 위치에 직접 덮어쓰기 함.
- 매우 간단하며 빠르게 효과를 볼 수 있음.
- 보통 실행 파일을 열어 jmp로 흐름을 바꾸거나, NOP 처리 등을 함.

#### 예시
```
// 원래 코드
00401000  mov eax, 1
00401005  ret

// 인라인 패치 후
00401000  mov eax, 0  ; 패치
00401005  ret
```

또는

```
// 코드 케이브 활용
00401000  jmp 0x00402000 ; 코드케이브로 점프

```

### 코드 케이브(Code Cave)란?
- 실행 파일 내부 또는 메모리상에 사용되지 않는 빈 공간(0x00 , 0x90(nop))을 의미하며 추가 코드를 삽입할 때 사용됨

#### 목적
패치하려는 코드가 인라인으로 삽입되기에는 너무 큼
기능 추가 또는 훅(Hook), 쉘 코드 사입시 사용
바이러스나 크랙툴 등이 자주 사용

#### 🧠 코드 케이브 활용 흐름
```text
1 사용되지 않는 빈 공간(보통 100바이트 이상) 찾기
2 원래 코드 시작 부분에 jmp 코드케이브주소 삽입
3 코드케이브에 원하는 기능 구현
4 마지막에 다시 원래 코드 흐름으로 jmp 원래위치 복귀
````

### 📌 요약
| 개념     | 설명                         |
| ------ | -------------------------- |
| 인라인 패치 | 기존 코드 영역 내 명령어를 직접 수정      |
| 코드 케이브 | 실행 파일 내 남는 공간에 코드를 추가 삽입   |
| 목적     | 기능 우회, 백도어 삽입, 디버깅, 크랙     |
| 위험     | 코드 충돌, 크기 초과, 보안 취약점 발생 가능 |


### 인라인 패치와 코드 패치의 차이점

### ✅ 코드 패치(Code Patch)
#### 📌 정의
- 실행 파일 전체 중 특정 영역(예: 함수 전체, 데이터 영역 등)을 더 넓은 범위로 수정하는 방식.
- 코드 케이브(code cave)나 파일 전체를 리빌드해서 수정된 바이너리를 생성하기도 함.

#### 📌 특징
- 파일 자체를 수정하는 경우가 많음.
- 인라인 패치보다 더 체계적인 변경이 가능함.
- 예를 들어 조건을 완전히 바꾸거나, 로직을 새로 삽입하고 싶은 경우 사용.

#### 📌 예시
- IDA에서 패치 후 Edit > Patch Program > Apply patches to input file로 실행 파일 자체 수정.

#### 차이점
| 구분        | 인라인 패치 (Inline Patch) | 코드 패치 (Code Patch) |
| --------- | --------------------- | ------------------ |
| 위치        | 원래 코드 위치              | 다른 위치 또는 전체 파일     |
| 방식        | 몇 바이트를 직접 덮어쓰기        | 함수 또는 전체 구조 변경     |
| 목적        | 빠른 기능 우회, 간단한 수정      | 로직 교체, 기능 삽입 등     |
| 적용 대상     | 메모리 or 파일             | 주로 파일 (영구 적용)      |
| 코드 케이브 활용 | `jmp`로 분기할 때 사용       | 자주 사용              |


